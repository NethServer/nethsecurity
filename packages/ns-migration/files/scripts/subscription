#!/usr/bin/python3

#
# Copyright (C) 2022 Nethesis S.r.l.
# SPDX-License-Identifier: GPL-2.0-only
#

import sys
import nsmigration

(u, data, nmap) = nsmigration.init("subscription.json")

if not data:
    sys.exit(0)

if data['subscription']['system_id']:
    nsmigration.vprint(f"Setting subscription system_id")
    u.set('ns-plug', 'config', 'system_id', data['subscription']['system_id'])

if data['subscription']['secret']:
    nsmigration.vprint(f"Setting subscription secret")
    u.set('ns-plug', 'config', 'secret', data['subscription']['secret'])

# Save configuration
u.commit("ns-plug")
